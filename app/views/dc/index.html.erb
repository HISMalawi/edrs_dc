<style type="text/css">
   a {
      text-decoration:none;
      color: #2f4f4f;   
   } 
   a:hover {
    color: #076591;
  } 
  #stats{
     margin-top: 5%;
  }
  #stats tr:hover{
      color: #076591;

  }
</style>
<div id="default" style="width: 100%; height: 400px; text-align: center; vertical-align: top;">

      <table style="width:100%">
              
              <tr>
                    <td style="width:80%">
                        <div id="buttons" style="display: inline ">

                        
                          <% if User.current_user.activities_by_level("#{@facility_type}").include?("View a record") %>

                                  <div class="touch_btn" onmousedown="window.location = '/people/search'" >
                                    <div class="icon">
                                           <i class="fa fa-search"></i>
                                    </div>
                                    <div class="button_label">Search Records</div>
                                    <div class="button_description">  Search cases </div>

                                    
                                  </div>
                          <%end%>

                          <% if User.current_user.activities_by_level("#{@facility_type}").include?("View a record") %>

                                  <div class="touch_btn" onmousedown="window.location = '/dc/manage_cases?next_url=/'" >
                                    <div class="icon">
                                           <i class="fa fa-folder-open"></i>
                                    </div>
                                    <div class="button_label">Manage Cases</div>
                                    <div class="button_description">  Manage cases </div>

                                    
                                  </div>
                          <%end%>

                          <% if User.current_user.activities_by_level("#{@facility_type}").include?("View a record") && User.current_user.role != "Data Clerk"%>

                                  <div class="touch_btn" onmousedown="window.location = '/dc/special_cases?next_url=/'" >
                                    <div class="icon">
                                           <i class="fa fa-folder-open"></i>
                                    </div>
                                    <div class="button_label">Special Cases</div>
                                    <div class="button_description">  Manage cases </div>

                                    
                                  </div>
                          <%end%>
                         <% if User.current_user.activities_by_level("DC").include?("Request to open a closed case") %>
                                 <div class="touch_btn" onmousedown="window.location = '/dc/manage_requests?next_url=/'" >
                                    <div class="icon">
                                           <i class="fa fa-folder-open"></i>
                                    </div>
                                    <div class="button_label">Ammendment cases</div>
                                    <div class="button_description">  Manage cases </div>

                                    
                                  </div>
                          <%end%>
                         
                          <% if  User.current_user.activities_by_level("DC").include?("Manage duplicates") %>
                                  <div class="touch_btn" onmousedown="window.location = '/dc/manage_duplicates?next_url=/'" >
                                    <div class="icon">
                                           <i class="fa fa-clone"></i>
                                    </div>
                                    <div class="button_label">Manage Duplicates</div>
                                    <div class="button_description">  Manage duplicates </div>

                                    
                                  </div>
                          <%end%>
                        
                              <div class="touch_btn"  onclick="window.location = '/reports?next_url=/'"   >
                                          <div class="icon">
                                                 <i class="fa fa-bar-chart"></i>
                                          </div>
                                          <div class="button_label"> Reports</div>
                                          <div class="button_description">  System reports</div>

                                      
                              </div>
                            <% if User.current_user.activities_by_level("#{@facility_type}").include?("Activate User") or
                                      User.current_user.activities_by_level("#{@facility_type}").include?("Deactivate User") or
                                      User.current_user.activities_by_level("#{@facility_type}").include?("Create User") or
                                      User.current_user.activities_by_level("#{@facility_type}").include?("Update User") %>

                                    <div class="touch_btn"  onclick="window.location = '/users?next_url=/'"   >
                                          <div class="icon">
                                                 <i class="fa fa-users"></i>
                                          </div>
                                          <div class="button_label"> Manage Users</div>
                                          <div class="button_description">  Managing syatem users.</div>

                                      
                                    </div>
                                     <div  style ="display:none" class="touch_btn"  onclick="window.location = '/duplicate?next_url=/'"   >
                                          <div class="icon">
                                                 <i class="fa fa-clone"></i>
                                          </div>
                                          <div class="button_label">Duplicate settings</div>
                                          <div class="button_description">  Duplicate capturing settings.</div>

                                      
                                    </div>
                                  <% if false%>
                                     <div class="touch_btn" onmousedown="window.location = '/build_mysql_database?next_url=/';" >
                                        <div class="icon">
                                               <i class="fa fa-database"></i>
                                        </div>
                                        <div class="button_label">Build MySQL</div>
                                        <div class="button_description">  Manage own account.</div>

                                      
                                    </div>
                                  <%end%>
                                    <div class="touch_btn" onmousedown="window.location = '/people/clear_all_locks'" >
                                        <div class="icon">
                                               <i class="fa fa-unlock-alt"></i>
                                        </div>
                                        <div class="button_label">Clear all locks</div>
                                        <div class="button_description">  Clear locks for all records.</div>

                                      
                                    </div>
                              <%end%>

                                <% if User.current_user.activities_by_level("#{@facility_type}").include?("Change own password") %>

                                    <div class="touch_btn" onmousedown="window.location = '/my_account';" >
                                        <div class="icon">
                                               <i class="fa fa-gears"></i>
                                        </div>
                                        <div class="button_label">My Account</div>
                                        <div class="button_description">  Manage own account.</div>

                                      
                                    </div>
                                <% end %>
                        </div>
                    </td>
                    <td valign="top">      
                        <table id="stats">
                              <tr><th colspan="3">Statistics</th></tr>
                              <tr onmousedown="window.location.href='/people/view'">
                                <td><a href="/people/view">Active Records</a></td>
                                <td> :</td> 
                                <td id="reported"  style="text-align:right; width: 30%">0</td>
                              </tr>
                          <% if User.current_user.role == "ADR"%>
                            <tr onmousedown="window.location.href='/dc/approve_cases'">
                                <td><a href="/dc/approve_cases" >Complete </a></td>
                                <td> :</td>
                                <td id ="complete"  style="text-align:right; width: 30%">0</td>
                            </tr>
                              
                          <% end %>
                              <tr  onmousedown="window.location.href='/dc/pending_cases'">
                                  <td><a href="/dc/pending_cases">Incomplete Records</a></td>
                                  <td> :</td> 
                                  <td id="incomplete"  style="text-align:right; width: 30%">0</td>
                              </tr>
                              <tr onmousedown="window.location.href='/dc/pending_cases'">
                                <td><a href="/dc/pending_cases">Rejected by ADR</a></td>
                                <td> :</td>
                                <td id="rejected"  style="text-align:right; width: 30%">0</td>
                              </tr>                          
                             <tr onmousedown="window.location.href='/dc/approved_cases'">
                                <td><a href="/dc/approved_cases">Approved by ADR</a></td>
                                <td> :</td>
                                <td id="approved"  style="text-align:right; width: 30%">0 </td>
                             </tr>
                        </table>
                    </td>
              </tr>

      </table>
</div>
<%= render :partial => "landing_resize" %>
<script type="text/javascript">

    function loadStats(){
          var stats = {
                        Reported     : "DC ACTIVE",
                        Approved     : "HQ ACTIVE",
                        Rejected     : "DC REJECTED",
                        Incomplete   : "DC INCOMPLETE"

          }

            simpleAjaxRequest("/dc/counts_by_status?status=DC ACTIVE", function(data){

                  var data =JSON.parse(data);

                   __$("reported").innerHTML = data.count     

            });  

            simpleAjaxRequest("/dc/counts_by_status?status=HQ ACTIVE", function(data){

                  var data =JSON.parse(data);

                   __$("approved").innerHTML = data.count     

            });

            simpleAjaxRequest("/dc/counts_by_status?status=DC REJECTED", function(data){

                  var data =JSON.parse(data);

                   __$("rejected").innerHTML = data.count     

            });
            simpleAjaxRequest("/dc/counts_by_status?status=DC INCOMPLETE", function(data){

                  var data =JSON.parse(data);
                  if (__$("incomplete")) {

                   __$("incomplete").innerHTML = data.count ;
                  }    

            });

             simpleAjaxRequest("/dc/counts_by_status?status=DC COMPLETE", function(data){

                  var data =JSON.parse(data);
                  if (__$("complete")) {

                    __$("complete").innerHTML = data.count;
                   }  

            }); 
    }
    resizeDiv();
    loadStats();

    setInterval(function(){           
      loadStats();
    }, 10000)

</script>

